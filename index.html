<!doctype html>
<html class="no-js" lang="">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title></title>
  <link rel="stylesheet" href="css/style.css">
  <meta name="description" content="">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/addons/p5.sound.min.js"></script>
</head>

<body style="background-color: lightblue;">

  <script>
    let MySound0;
    let MySound1;
    let MySound2;
    let MySound3;
    let circles = [];

    function preload() {
      soundFormats("WAV");
      MySound0 = loadSound("144413__pjcohen__phatlofidrumkitkickbass.wav");
      MySound1 = loadSound("318331__freakshitor669__snare-drums-oneshot-lord-lokus.wav");
      MySound2 = loadSound("384680__mathan24__drum-r-8.wav");
      MySound3 = loadSound("679131__josefpres__drum-kit-001-bass-drum-1.wav");
    }

    function setup() {
      createCanvas(400, 400);

      // create circles after preload() so .sound references are valid
      circles = [
        { x:100, y:100, diameter:50, r:45,  g:100, b:78,  a:50, sound: MySound0 },
        { x:300, y:200, diameter:50, r:80,  g:20,  b:100, a:50, sound: MySound1 },
        { x:200, y:300, diameter:50, r:150, g:50,  b:150, a:50, sound: MySound2 },
        { x:150, y:250, diameter:50, r:200, g:80,  b:200, a:50, sound: MySound3 }
      ];
    }

    function draw() {
      background(220);
      for (let i = 0; i < circles.length; i++) {
        noStroke();
        fill(circles[i].r, circles[i].g, circles[i].b, circles[i].a);
        circle(circles[i].x, circles[i].y, circles[i].diameter);
      }
    }

    function mousePressed() {
      // ensure audio context is resumed on user gesture
      userStartAudio();

      for (let i = 0; i < circles.length; i++) {
        let d = dist(mouseX, mouseY, circles[i].x, circles[i].y);
        if (d < circles[i].diameter / 2) {
          if (circles[i].sound && !circles[i].sound.isPlaying()) circles[i].sound.play();
        } else {
          if (circles[i].sound && circles[i].sound.isPlaying()) circles[i].sound.stop();
        }
      }
    }
  </script>

</body>

</html>