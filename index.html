<!doctype html>
<html class="no-js" lang="">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title></title>
  <link rel="stylesheet" href="css/style.css">
  <meta name="description" content="">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/addons/p5.sound.min.js"></script>
</head>

<body style="background-color: lightblue;">

  <script>
    let MySound0;
    let MySound1;
    let MySound2;
    let MySound3;
    let circles = [];

    // variables used for sin to make shape pulse 
    let angle = 0;
    let pulseSpeed = 0.05;
    let pulseAmount = 5;

    // Add this with your other global variables
    let backgroundImg;

    function preload() {
      soundFormats("WAV");
      MySound0 = loadSound("144413__pjcohen__phatlofidrumkitkickbass.wav");
      MySound1 = loadSound("318331__freakshitor669__snare-drums-oneshot-lord-lokus.wav");
      MySound2 = loadSound("384680__mathan24__drum-r-8.wav");
      MySound3 = loadSound("679131__josefpres__drum-kit-001-bass-drum-1.wav");
      MySound4 = loadSound("264800__johnthewizar__snare-3.wav");
      MySound5 = loadSound("511275__sassaby__alfaia-hit-combined.wav");
      // Add this line to load your image
      backgroundImg = loadImage('SLS_Artwork1.png');
    }

    function setup() {
      createCanvas(400, 400);

      // created circles as objects within an array so that later on i can use one for loop to draw them all
      circles = [
        { x:122, y:228, diameter:22, r:168,  g:142, b:140, a:200, sound: MySound0 },
        { x:162, y:245, diameter:22, r:181,  g:145, b:126, a:200, sound: MySound1 },
        { x:188, y:240, diameter:22, r:208, g:142,  b:121, a:200, sound: MySound2 },
        { x:221, y:231, diameter:22, r:182, g:138,  b:136, a:200, sound: MySound3 },
        { x:321, y:229, diameter:16, r:173, g:165,  b:170, a:150, sound: MySound4 },
        { x:32,  y:246,  diameter:20, r:147, g:138,  b:151, a:150,sound: MySound5 }   

      ];
    }


    
    function draw() {
      // Replace background(220) with this
      image(backgroundImg, 0, 0, width, height);
      
      // Update the angle for the pulsing effect
      angle += pulseSpeed;
      
      for (let i = 0; i < circles.length; i++) {
        noStroke();
        fill(circles[i].r, circles[i].g, circles[i].b, circles[i].a);
        
        // Calculate pulsating diameter using sin()
        let pulsatingDiameter = circles[i].diameter + sin(angle) * pulseAmount;
        
        circle(circles[i].x, circles[i].y, pulsatingDiameter);
      }
    }

    function mousePressed() {
      // ensure audio context is resumed on user gesture - i wonder is this necessary here if i have userStartAudio in setup?
      userStartAudio();

      for (let i = 0; i < circles.length; i++) {
        let d = dist(mouseX, mouseY, circles[i].x, circles[i].y);
        if (d < circles[i].diameter / 2) {
          if (circles[i].sound && !circles[i].sound.isPlaying()) circles[i].sound.play();
        } else {
          if (circles[i].sound && circles[i].sound.isPlaying()) circles[i].sound.stop();
        }
      }
    }
  </script>

</body>

</html>